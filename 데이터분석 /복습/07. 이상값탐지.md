# 이상값 탐지 
## 마할라노비스 거리의 특징 
    1. 변수 간 상관관계 고려(변수들이 연관된 정도를 반영)
    2. 다변량 이상치 탐지(여러 변수 조합에 나타나는이상치 잡아냄)
    3. 거리 값의 분포가 카이제곱 분포와 연결 -> 자유도 = 변수 개수 인 카이제곱 분포를 따름 -> 이상치 판정시 통계적 임계값 설정이 가능하다. 

# 이상값처리 코드의 논리 
 1. 이상값과 정상값의 특성 비교 (그룹을 분리하여 주요 수치형 변수의 평균, 중위수, 차이의 배율 비교 )
  --> 어떤 변수에서 이상값이 두드러지는지 파악

2. 이상값의 유형별 분류 
    모비즈니스 맥락에 ㄸ라 이상값을 나눈다 , 
    * VIP 고객, 평균구매액과 충성도 포인트가 모두 상위 5% 이상인 고객을 제거 대상이 아닌 특별관리 마케팅 대상으로 분류함 
    * 데이터 오류: 나이가 100세 초과하거나 마지막구매후 경과일이 음수인 겨우처럼 현실에서 불가능한 값은 수정하거나 제거 

# 이상값 처리 실행코드 논리 
    * 윈저화에서 99번째 백분위수 사용이유
        - 윈저화란? 극단적인 이상값을 데이터의 일정 백분위수 값으로 대체하는 통계기법 
        - 극단값의 영향 최소화
        - 정보손실 최소화
        - 분포의 안정성 확보 
    * isolation은 데이터 이상치가 너무 복잡하게 숨어있는 경우에 사용되고, 마할라노비스 거리기반 다변량 이상값처리는 데이터가 정규 분포를 따를때 사용한다. 

 ** 마할라 노비스 거리란?
 특정 데이터 포인트가 '정상적인' 데이터 그룹에서 얼마나 떨어져 있는지를 측정하는 개념. 
 주로 활용되는 곳: 
 (1) 이상치 탐지 : 마할라노비스 거리가 큰 데이터 포인트는 패턴에 벗어난 이상치로 간주될 가능성이 높다. 
 (2) 군집화: 데이터 포인트가 어느그룹에 속할 가능성이 높은지 판단하는데 사용. 마할라노비스 거리가 가까운 데이터 포인트는 같은 그룹에 속할 확률 높음 

 --> 마할라노비스 거리는 데이터의 특징과 분포를 반영하여 거리를 측정하는 똑똑한 자(ruler)이다.  이는 단순히 직선 거리를 재는 것이 아니라, 데이터가 어떤 모양으로 뭉쳐 있는지까지 고려해서 '이상함'을 판단하기 때문에, 데이터 분석에서 훨씬 더 유용하게 사용된다. 