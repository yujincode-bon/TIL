# 상관분석 
* 두 변수 간에 서로 얼마나 함께 변하는지 정도를 나타내는 개념 
 두 변수간에 서로 얼마나 함께 변하는지 정도를 나타내는 통계 개념
- 값의 범위는 : -1 ~+1
    - +1: 완벽한 양의 상관관계 => x가 증가하면 y도 비례해서 증가: 키- 몸무게 
    - 0 상관없음 : 키와 수학점수 
    - -1 : 완벽한 음의 상관관계 => x가 증가하면 y가 비례하여 감소 : 운동량 - 체지방 

## 오늘 실습한 내용 대략적인 정리 
 1. da_util 이라는 함수를  정리해둔 모듈을 불러온다 .
 2. 특히 pattern라는  결측이 어떤 패턴으로 나타나는지 분석하는 함수를 사용한다. 
 3. 이상값을 정의할 기준을 설정한다. 
 4. invoiceNo 라는 송장번호 = 총 주문건수 (하나의 주문에 여러개의 상품이 포함될 수 있어서, 전체 거래수와 다를 수 있다. nunique는 해당 열의 중복되지 않는 값의 개수를 세어준다.)
 5. 데이터 전처리
   - df_clean 라는 데이터 프레임을 재정의 한다(InvoiceNo 가 문자열 형태로 되어있는 즉, 숫자 앞에 C라는 알파벳[취소된 거래]가 제거된 데이터프레임을 만든다.)
   -  df_clean 데이터 프레임을 이용해서 형변환을 진행한다. 
    TotalAmount[수량 * 단가], InvoiceDate(DateTime), Year, Month, DayOfWeek(숫자), Hour, DayName(글자), CustomerID(Str): --> 단순한 문자열 형태로는 날짜 분석이나 시간대별 패턴 파악이 어려워서 pd.datetime()함수 사용 
    *customerID 를 문자열로 변환: 고객 아이디는 실수로 되어있지만 실제 계산에 사용되는 것이 아니라서, int형을 str 형으로 변환한다. 
  - 양수 수향과 양수 단가 데이터만 살린다. 

 6. 고객별 구매 패턴 특성 DF 를 생성한다. (파생변수를 생성해서)
 - customer_stats라는 df 생성해서, 파생변수를 컬럼명 정리한다. (구매횟수: Frequency, 총구매액: Monatary)
 ```python
 custoemrt_state['구매기간일수'] = (customer_stats['마지막 구매일']- customer_stats['첫구매일']).dt.days+1 ##--> 오늘주문한 고객이 있을 수 있으니 1 을 더한다.
```
 - RFM 분석 변수를 만들고 5등분하여 등급을 나눈다. 
 7. 추가정보로 평균장바구니크기(총구매량/Frequency)와 거래당상품종류(상품종류수/Frequency)를 추가한다.
 8. 가격 민감도로 단가가 일관적으로 일관되게 유지하는가를 평가한다. 
    - CV(변동계수 Coefficient of Variation)
